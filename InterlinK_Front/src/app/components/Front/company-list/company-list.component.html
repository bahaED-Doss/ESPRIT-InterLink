<!-- Hero Section -->
<section class="hero-area py-5 bg-light">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-8 text-center">
        <h1 class="mb-4 wow fadeInUp" data-wow-delay=".3s">
          <span class="text-primary">Search for your favorite company</span>
        </h1>

        <!-- Search Form -->
        <div class="search-container p-4 shadow rounded bg-white wow fadeInUp" data-wow-delay=".7s">
          <form>
            <div class="row g-5">
              <div class="col-md-6">
                <label for="industrySector" class="form-label">Industry Sector</label>
                <select class="form-select" id="industrySector" [(ngModel)]="searchIndustrySector" name="industrySector" (ngModelChange)="onSearch()">
                  <option value="" disabled selected>Select Industry Sector</option>
                  <option *ngFor="let sector of industrySectors" [value]="sector">{{ sector }}</option>
                </select>
              </div>
              <div class="col-md-6">
                <label for="location" class="form-label">Location</label>
                <select class="form-select" id="location" [(ngModel)]="selectedLocation" name="location" (ngModelChange)="onSearch()">
                  <option value="" disabled selected>Select Location</option>
                  <option *ngFor="let loc of locations" [value]="loc">{{ loc }}</option>
                </select>
              </div>
            </div>
          </form>
        </div>

        <!-- Search Results -->
        <div *ngIf="searchResults.length > 0" class="search-results mt-5">
          <h3 class="text-success mb-4">Search Results</h3>
          <div class="row g-4">
            <div *ngFor="let company of searchResults" class="col-md-4">
              <div class="company-card h-100">
                <img *ngIf="company.logoUrl" [src]="company.logoUrl" class="company-logo" alt="Company Logo" />
                <div class="company-info">
                  <h5>{{ company.name }}</h5>
                  <p>
                    <strong>{{ company.industrySector }}</strong><br />
                    {{ company.location }}<br />
                    <a *ngIf="company.website" [href]="company.website" target="_blank" class="website-link">Visit Website</a>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Company Directory -->
<section class="directory-section py-5">
  <div class="container">
    <h2 class="text-center mb-4">Discover other companies that woks with us</h2>
    <div class="table-responsive">
      <table class="table table-hover align-middle">
        <thead class="table-primary text-center">
          <tr>
            <th>Logo</th>
            <th>Name</th>
            <th>Location</th>
            <th>Website</th>
            <th>Sector</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let company of companies">
            <td class="text-center">
              <img *ngIf="company.logoUrl" [src]="company.logoUrl" alt="Logo" class="company-table-logo" />
            </td>
            <td>{{ company.name }}</td>
            <td>{{ company.location }}</td>
            <td>
              <a *ngIf="company.website" [href]="company.website" target="_blank" class="website-link">
                {{ company.website }}
              </a>
            </td>
            <td>{{ company.industrySector }}</td>
            <td class="text-center">
              <button class="btn btn-outline-info btn-sm me-2" [routerLink]="['/company-details', company.companyId]">
                <i class="bi bi-eye"></i> View
              </button>
            
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- Google Map Container -->
<div class="container mt-5">
  <h3 class="text-center mb-3">Companies Locations</h3>
  <div class="d-flex justify-content-center">
    <google-map width="100%" height="400px" [center]="mapCenter" [zoom]="zoomLevel">
      <map-marker *ngFor="let company of companies" [position]="{ lat: company.latitude, lng: company.longitude }"
        [label]="company.name">
      </map-marker>
    </google-map>
  </div>
</div>

<!-- Statistics Section -->
<section class="statistics-section py-5">
  <div class="container">
    <h3 class="text-center mb-4">Companies Statistics</h3>
    <div class="row">
      <div class="col-md-6">
        <div echarts [options]="projectsChartOption" class="chart-container"></div>
      </div>
      <div class="col-md-6">
        <div echarts [options]="industryChartOption" class="chart-container"></div>
      </div>
    </div>
  </div>
</section>
