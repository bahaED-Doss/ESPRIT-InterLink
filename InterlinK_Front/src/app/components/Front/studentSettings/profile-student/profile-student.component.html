<app-navbar-student></app-navbar-student>

<div class="container">
  <h4 class="title">Account Settings</h4>

  <div class="settings-card">
      <div class="row">
          <!-- Sidebar -->
          <div class="col-md-3 sidebar">
              <div class="list-group">
                <a class="list-group-item " [routerLink]="['/profileStudent', userId]" routerLinkActive="active">General</a>
                <a class="list-group-item" [routerLink]="['/changePassS', userId]" routerLinkActive="active">Change Password</a>
                <a class="list-group-item" [routerLink]="['/skillsS', userId]" routerLinkActive="active">Skills</a>
                <a class="list-group-item" [routerLink]="['/socialLinksS', userId]" routerLinkActive="active">Social Links</a>
                <a class="list-group-item" [routerLink]="['/educationS', userId]" routerLinkActive="active">Education</a>
                <a class="list-group-item" [routerLink]="['/documentss', userId]" routerLinkActive="active">My documents</a>

              </div>
          </div>

          <!-- Main Content -->
          <div class="col-md-9 content">
              <div class="profile-header">
                  <!-- Use getPhotoUrl() to get the correct image URL -->
                  <img [src]="getPhotoUrl()" class="profile-img">
                  <div class="upload-section">
                      <label class="btn btn-upload">
                        Upload New Photo
                        <input type="file" (change)="onFileSelected($event)" hidden>
                      </label>
                      <button class="btn btn-reset" (click)="resetPhoto()">Reset</button>
                  </div>
                  <!-- New Social Links Section -->
                  <div class="social-links">
                      <!-- Each icon only shows if the URL is present -->
                      <a *ngIf="user?.facebook" [href]="user.facebook" target="_blank" class="social-icon ">
                        <i class="fab fa-facebook-f"></i>
                      </a>
                      <a *ngIf="user?.githubLink" [href]="user.githubLink" target="_blank" class="social-icon github">
                        <i class="fab fa-github"></i>
                      </a>
                      <a *ngIf="user?.linkedin" [href]="user.linkedin" target="_blank" class="social-icon linked">
                        <i class="fab fa-linkedin-in"></i>
                      </a>
                      <a *ngIf="user?.instagram" [href]="user.instagram" target="_blank" class="social-icon insta">
                        <i class="fab fa-instagram"></i>
                      </a>
                  </div>
              </div>

              <hr class="divider">

              <!-- Profile Form -->
              <form [formGroup]="userForm">
                  <div class="form-group">
                      <label>First Name</label>
                      <input type="text" class="form-control" formControlName="firstName">
                  </div>
                  <div class="form-group">
                      <label>Last Name</label>
                      <input type="text" class="form-control" formControlName="lastName">
                  </div>
                  <div class="form-group">
                      <label>E-mail</label>
                      <input type="email" class="form-control" formControlName="email">
                      <div *ngIf="userForm.get('email')?.hasError('espritEmail')" class="error-message">
                        Email must end with esprit.tn.
                      </div>
                  </div>
                  <div class="form-group">
                      <label>Phone Number</label>
                      <input type="text" class="form-control" formControlName="phoneNumber">
                      <div *ngIf="userForm.get('phoneNumber')?.hasError('exactDigits')" class="error-message">
                        Phone number must contain exactly 8 digits.
                      </div>
                  </div>
                  <div class="form-group">
                    <label>Level of Study</label>
                    <select class="form-control" formControlName="levelOfStudy">
                      <option value="">Select level</option>
                      <option value="Bachelor">Bachelor</option>
                      <option value="Master">Master</option>
                      <option value="PhD">PhD</option>
                    </select>
                  </div>

                  <div class="action-buttons">
                      <button type="button" class="btn btn-save" (click)="saveChanges()">Save Changes</button>
                      <button type="button" class="btn btn-cancel">Cancel</button>
                  </div>
              </form>
          </div>
      </div>
  </div>
</div>

<app-footer></app-footer>
