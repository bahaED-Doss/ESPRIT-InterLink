<app-navbar></app-navbar>

<div class="internships-container">
  <div class="internships-layout">
    <div class="internships-list">
      <div *ngFor="let internship of internships" class="internship-card">
        <h3 class="internship-title">{{ internship.title }}</h3>
        <p><strong>ğŸ“ Description :</strong> {{ internship.description }}</p>
        <p><strong>ğŸ¢ Entreprise :</strong> {{ internship.companyName }}</p>
        <p><strong>ğŸ“ Localisation :</strong> {{ internship.localisation }}</p>
        <p><strong>ğŸ“… DÃ©but :</strong> {{ internship.startDate | date:'dd/MM/yyyy' }}</p>
        <p><strong>ğŸ“… Fin :</strong> {{ internship.endDate | date:'dd/MM/yyyy' }}</p>
        <p><strong>â³ DurÃ©e :</strong> {{ internship.duration }}</p>
        <p><strong>ğŸ“Œ Type :</strong> {{ internship.type }}</p>
        <p><strong>ğŸ› ï¸ CompÃ©tence requise :</strong> {{ internship.skill }}</p>
        <p><strong>ğŸ‘¥ Places disponibles :</strong> {{ internship.availableSpots }}</p>

        <button (click)="applyForInternship(internship)" class="apply-btn">ğŸš€ Postuler</button>
      </div>
    </div>

    <!-- Formulaire de candidature -->
    <div *ngIf="selectedInternship" class="application-form">
      <h3 class="form-title">ğŸ“„ Postuler pour : {{ selectedInternship.title }}</h3>

      <form (ngSubmit)="submitApplication()">
        <div class="form-group">
          <label for="firstName">ğŸ‘¤ PrÃ©nom :</label>
          <input type="text" id="firstName" [(ngModel)]="application.firstName" name="firstName" required />
        </div>

        <div class="form-group">
          <label for="lastName">ğŸ‘¤ Nom :</label>
          <input type="text" id="lastName" [(ngModel)]="application.lastName" name="lastName" required />
        </div>

        <div class="form-group">
          <label for="email">ğŸ“§ Email :</label>
          <input type="email" id="email" [(ngModel)]="application.email" name="email" required />
        </div>

        <div class="form-group">
          <label for="phone">ğŸ“ TÃ©lÃ©phone :</label>
          <input type="tel" id="phone" [(ngModel)]="application.phoneNumber" name="phoneNumber" required />
        </div>

        <div class="form-group">
          <label for="cv">ğŸ“ CV :</label>
          <input type="file" id="cv" (change)="onFileSelected($event)" required />
        </div>

        <p *ngIf="application.status">
          <strong>ğŸ“Œ Statut :</strong> {{ application.status }}
        </p>

        <div class="btn-group">
          <button *ngIf="application.status !== 'PENDING'" type="submit" class="submit-btn">âœ… Envoyer</button>
          <p *ngIf="application.status === 'PENDING'">â³ Candidature en attente de validation...</p>
          <button type="button" (click)="cancelApplication()" class="cancel-btn">âŒ Annuler</button>
        </div>
      </form>
    </div>
  </div>
</div>
